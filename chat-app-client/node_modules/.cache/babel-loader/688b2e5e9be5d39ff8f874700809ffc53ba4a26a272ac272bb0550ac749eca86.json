{"ast":null,"code":"var _jsxFileName = \"/Users/kobepane/Documents/CIT 382/chat-app/chat-app-client/src/chat.js\",\n  _s = $RefreshSig$();\n/*\nChat component for the chat application\n*/\n\nimport \"./chat.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport Example from \"./piechart\";\nimport React, { useState, useEffect } from \"react\";\n\n// Websocket imports\nimport { io } from \"socket.io-client\";\n\n/*\nNeed to open up a websocket server for users on a url and port\nwhen a message is received on the websocket, we need an event handler to add that message to the messages state variable \nand then be mapped onto the front end \nwhen the send button is clicked, we need an event handler to send that message which is kept in a state variable through the \nwebsocket, and then clear the state variable\n*/\n\n// const socket = io(\"http://localhost:3001\");\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat(props) {\n  _s();\n  const {\n    username,\n    country,\n    chat,\n    example_users\n  } = props;\n  const navigate = useNavigate();\n\n  // State Variables for message in text box and messages array\n  const [message, setMessage] = useState(\"\");\n  const [chatMessages, setChatMessages] = useState([]);\n  const socket = io(\"http://localhost:3001\");\n\n  // Control the message state variable\n  function handleTextChange(e) {\n    setMessage(e.target.value);\n  }\n\n  // Handle button click, and send message data to server\n  function sendMessage() {\n    const messageObj = {\n      message: message,\n      user: username\n    };\n    socket.emit(\"message-to-server\", messageObj, chat);\n    setMessage(\"\");\n  }\n\n  // Handle enter/return clicked by user in the text area to send message to server\n  function handleEnterKeyPress(e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  }\n  function handleLeaveChat() {\n    socket.emit(\"leave-chat-room\", chat);\n    navigate(\"/\");\n  }\n\n  // Initialize the connection, and listen for for messages from the server\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      // POSSIBLE DEBUG\n      socket.emit(\"join-chat-room\", chat);\n      socket.on(\"message-to-client\", data => {\n        console.log(data);\n        setChatMessages(prevChatMessages => [...prevChatMessages, data]);\n      });\n\n      // socket.emit(\"msg\", \"Message from Client\");\n    });\n    return () => {\n      socket.off(\"connect\");\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item users\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-list-parent\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"users-header\",\n            children: [\"Users(\", example_users.length, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"users-list\",\n            children: example_users.map(user => {\n              return /*#__PURE__*/_jsxDEV(\"p\", {\n                children: user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 24\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"leave-button\",\n          onClick: handleLeaveChat,\n          children: \"Leave Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item chat\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header item\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: chat\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages item\",\n          children: chatMessages.map((message, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `message ${message.user === username ? \"sent\" : \"received\"}`,\n              children: [message.user != username ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"span-username\",\n                  children: message.user\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 21\n              }, this) : \"\", message.message]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-textbox item\",\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: message,\n            placeholder: \"Type a message...\",\n            className: \"chat-inputbox item\",\n            onChange: handleTextChange,\n            onKeyDown: handleEnterKeyPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"send-button-div\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"send-button\",\n              onClick: sendMessage,\n              children: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item chart\",\n        children: /*#__PURE__*/_jsxDEV(Example, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"geuoot/KenjKK7oTYjZwMg0Frsc=\", false, function () {\n  return [useNavigate];\n});\n_c = Chat;\nexport { Chat };\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useNavigate","Example","React","useState","useEffect","io","jsxDEV","_jsxDEV","Chat","props","_s","username","country","chat","example_users","navigate","message","setMessage","chatMessages","setChatMessages","socket","handleTextChange","e","target","value","sendMessage","messageObj","user","emit","handleEnterKeyPress","key","shiftKey","preventDefault","handleLeaveChat","on","data","console","log","prevChatMessages","off","children","className","length","fileName","_jsxFileName","lineNumber","columnNumber","map","id","onClick","index","placeholder","onChange","onKeyDown","_c","$RefreshReg$"],"sources":["/Users/kobepane/Documents/CIT 382/chat-app/chat-app-client/src/chat.js"],"sourcesContent":["/*\nChat component for the chat application\n*/\n\nimport \"./chat.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport Example from \"./piechart\";\nimport React, { useState, useEffect } from \"react\";\n\n// Websocket imports\nimport { io } from \"socket.io-client\";\n\n/*\nNeed to open up a websocket server for users on a url and port\nwhen a message is received on the websocket, we need an event handler to add that message to the messages state variable \nand then be mapped onto the front end \nwhen the send button is clicked, we need an event handler to send that message which is kept in a state variable through the \nwebsocket, and then clear the state variable\n*/\n\n// const socket = io(\"http://localhost:3001\");\n\nfunction Chat(props) {\n  const { username, country, chat, example_users } = props;\n\n  const navigate = useNavigate();\n\n  // State Variables for message in text box and messages array\n  const [message, setMessage] = useState(\"\");\n  const [chatMessages, setChatMessages] = useState([]);\n\n  const socket = io(\"http://localhost:3001\");\n\n  // Control the message state variable\n  function handleTextChange(e) {\n    setMessage(e.target.value);\n  }\n\n  // Handle button click, and send message data to server\n  function sendMessage() {\n    const messageObj = { message: message, user: username };\n    socket.emit(\"message-to-server\", messageObj, chat);\n    setMessage(\"\");\n  }\n\n  // Handle enter/return clicked by user in the text area to send message to server\n  function handleEnterKeyPress(e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  }\n\n  function handleLeaveChat() {\n    socket.emit(\"leave-chat-room\", chat);\n    navigate(\"/\");\n  }\n\n  // Initialize the connection, and listen for for messages from the server\n  useEffect(() => {\n    socket.on(\"connect\", () => {\n      // POSSIBLE DEBUG\n      socket.emit(\"join-chat-room\", chat);\n      socket.on(\"message-to-client\", (data) => {\n        console.log(data);\n        setChatMessages((prevChatMessages) => [...prevChatMessages, data]);\n      });\n\n      // socket.emit(\"msg\", \"Message from Client\");\n    });\n\n    return () => {\n      socket.off(\"connect\");\n    };\n  }, []);\n\n  return (\n    <div>\n      <div className=\"container\">\n        <div className=\"item users\">\n          <div className=\"user-list-parent\">\n            <h2 className=\"users-header\">Users({example_users.length})</h2>\n            <div className=\"users-list\">\n              {example_users.map((user) => {\n                return <p>{user.username}</p>;\n              })}\n            </div>\n          </div>\n          <button id=\"leave-button\" onClick={handleLeaveChat}>\n            Leave Chat\n          </button>\n        </div>\n        <div className=\"item chat\">\n          <div className=\"chat-header item\">\n            <h2>{chat}</h2>\n          </div>\n          <div className=\"chat-messages item\">\n            {chatMessages.map((message, index) => {\n              return (\n                <div\n                  key={index}\n                  className={`message ${\n                    message.user === username ? \"sent\" : \"received\"\n                  }`}\n                >\n                  {message.user != username ? (\n                    <div>\n                      <span className=\"span-username\">{message.user}</span>\n                      <br />\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                  {message.message}\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"chat-textbox item\">\n            <textarea\n              value={message}\n              placeholder=\"Type a message...\"\n              className=\"chat-inputbox item\"\n              onChange={handleTextChange}\n              onKeyDown={handleEnterKeyPress}\n            />\n            <div className=\"send-button-div\">\n              <button id=\"send-button\" onClick={sendMessage}>\n                Send\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"item chart\">\n          <Example />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport { Chat };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}